# Demo Configuration Server by Ansible

Этот проект содержит пример настройки сервера с использованием Ansible и Docker. С помощью данного проекта вы сможете быстро развернуть инфраструктуру и применить конфигурацию к группам серверов с помощью Ansible playbook.

## Оглавление

1. [Клонирование репозитория](#клон)
2. [Запуск Docker-контейнеров](#docker)
3. [Настройка Ansible и запуск playbook](#ansible)
   - [Добавление приватного ключа](#ключ)
4. [Основной playbook и теги](#теги)
   - [Запуск конкретных ролей с тегами](#теги-роли)
5. [Пример команды запуска](#пример)

---

<a name="клон"></a>
## 1. Клонирование репозитория

Клонируйте репозиторий с проектом на свой локальный компьютер:

```bash
git clone <URL_репозитория>
```

<a name="docker"></a>
## 2. Запуск Docker-контейнеров

Перейдите в папку docker и выполните команду для запуска всех необходимых контейнеров в фоновом режиме:

```bash
cd docker
docker-compose up -d
```

<a name="ansible"></a>
## 3. Настройка Ansible и запуск playbook

Перейдите в директорию Ansible и настройте доступ к приватному ключу перед выполнением команд ansible-playbook.

<a name="ключ"></a>
### Добавление приватного ключа
Чтобы Ansible мог использовать приватный ключ, добавьте его с помощью SSH-агента:
```bash
ssh-add ../docker/ssh-keys/webserver
```

Либо укажите путь к ключу напрямую в команде ansible-playbook:
```bash
ansible-playbook --private-key ../docker/ssh-keys/webserver main.yaml
```

<a name="теги"></a>
## 4. Основной playbook и теги
Основной файл playbook — main.yaml, в нем все роли протегированы. Это позволяет запускать отдельные роли по необходимости.

<a name="теги-роли"></a>
### Запуск конкретных ролей с тегами
Чтобы запустить конкретную роль, используйте параметр --tags и укажите нужный тег. Например, тег all запустит все роли:

```bash
ansible-playbook --tags all main.yaml
```

Кроме того, для указания группы хостов, к которой нужно применить конфигурацию, используйте флаг --limit.

<a name="пример"></a>
## 5. Пример команды запуска
Пример команды для запуска playbook, который применяет все роли к группе хостов web-servers с использованием приватного ключа:

```bash
ansible-playbook -i ./inventory/hosts.ini --limit web-servers --tags all --private-key ../docker/ssh-keys/webserver main.yaml

